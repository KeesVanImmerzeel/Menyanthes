document()
document()
load_all()
x <- hm_read_export_csv( system.file("extdata","export_data_menyanthes.csv",package="menyanthes"))
str(x)
y <- hm_read_export_csv2( system.file("extdata","Topsoil1.csv",package="menyanthes"))
str(y)
load_all()
x <- hm_read_export_csv( system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
)
str(x)
y <- hm_read_export_csv2( system.file("extdata","Topsoil1.csv",package="menyanthes"))
str(y)
load_all()
x <- hm_read_export_csv( system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
)
y <- hm_read_export_csv2( system.file("extdata","Topsoil1.csv",package="menyanthes"))
str(x)
str(y)
test <- hm_filter_on_year(x)
range(x$xd$DATE)
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm <- hm_read_export_csv( fname )
hm_filtered <- hm_filter_on_year( hm, minyear=2000)
hm_filterd
hm_filtered$xd
hm_filtered$xm
document()
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm <- hm_read_export_csv( fname )
gxg <- hm_calc_gxg(hm)
str(hm)
# Bereken GxG's en voeg de waarden toe aan de gegevens van de peilbuizen.
# Ref 'Een alternatieve GHG analyse' Drs. D.H. Edelman, Ir. A.S. Burger
# Stromingen 15 (2009) nummer 3 p29-34.
AHG <- hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(AHG=quantile(HEAD,.9985))
AHG <- hm$xd %>% dplyr::group_by(NAME, FILTER)
?quantile
# Bereken GxG's en voeg de waarden toe aan de gegevens van de peilbuizen.
# Ref 'Een alternatieve GHG analyse' Drs. D.H. Edelman, Ir. A.S. Burger
# Stromingen 15 (2009) nummer 3 p29-34.
AHG <- hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(AHG=quantile(HEAD,.9985,na.rm = TRUE))
load_all()
gxg <- hm_calc_gxg(hm)
gxg
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
<- hm1 <- hm_read_export_csv( fname )
hm1 <- hm_read_export_csv( fname )
use_data(hm1)
document()
use_testthat()
use_test()
fname <- system.file("extdata","Topsoil1.csv",package="menyanthes")
hm2 <- hm_read_export_csv2( fname )
use_data(hm2)
document()
document()
library(devtools)
document()
?hm_read_export_cs2
?hm_read_export_csv2
document()
?hm_read_export_csv
document()
?hm_read_export_csv
document()
?hm_read_export_csv2
library(menyanthes)
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm1 <- hm_read_export_csv( fname )
str(hm1)
document()
?hm_read_export_csv
document()
?hm_read_export_csv
document()
?hm_read_export_csv
document()
?hm_read_export_csv
document()
?hm_read_export_csv
document()
?hm_read_export_csv
document()
?hm_read_export_csv
str(hm1)
document()
?hm_read_export_csv
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
?hm_filter_on_year()
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm <- hm_read_export_csv( fname )
hm_filtered <- hm_filter_on_year( hm, minyear=2000)
?hm_calc_gxg()
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm <- hm_read_export_csv( fname )
gxg <- hm_calc_gxg(hm)
str(gxg)
document()
?hm_calc_gxg()
document()
?hm_calc_gxg()
str(gxg)
document()
?hm_calc_gxg()
library(devtools)
library(menyanthes)
?menyanthes
?hm_calc_gxg()
document()
?hm_calc_gxg()
library(menyanthes)
?menyanthes
document()
library(devtools)
document()
?menyanthes()
document()
?menyanthes
library(devtools)
document()
?menyanthes
library(menyanthes)
?menyanthes
?hm_calc_gxg
library(menyanthes)
?menyanthes
document()
?menyanthes
library(devtools)
library(menyanthes)
?menyanthes
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm1 <- hm_read_export_csv( fname )
str(hm1)
fname <- system.file("extdata","Topsoil1.csv",package="menyanthes")
hm2 <- hm_read_export_csv2( fname )
str(hm2)
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm <- hm_read_export_csv( fname )
hm_filtered <- hm_filter_on_year( hm, minyear=2000)
str(hm_filtered)
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm <- hm_read_export_csv( fname )
gxg <- hm_calc_gxg(hm)
str(gxg)
library(devtools)
library(menyanthes)
?menyanthes
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm1 <- hm_read_export_csv( fname )
str(hm1)
?hm_calc_gxg
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm <- hm_read_export_csv( fname )
str(hm)
library(dplyr)
dplyr::group_by(hm$xd,NAME,FILTER)
library(magrittr)
library(ggplot2)
dplyr::group_by(hm$xd,NAME,FILTER) %>% do(plots=ggplot(data=.) +
aes(x=DATE, y=HEAD) + geom_point() + ggtitle(unique(.$NAME)))
hm$xd %>% dplyr::group_by(NAME,FILTER) %>% do(plots=ggplot(data=.) +
aes(x=DATE, y=HEAD) + geom_point() + ggtitle(unique(.$NAME)))
test <- hm$xd %>% dplyr::group_by(NAME,FILTER) %>% do(plots=ggplot(data=.) +
aes(x=DATE, y=HEAD) + geom_point() + ggtitle(unique(.$NAME)))
str(test[1]$NAME)
str(test[1,3])
plot(test[1,3])
str(test)
test <- hm$xd %>% dplyr::group_by(NAME,FILTER) %>% do(plots=ggplot(data=.) +
aes(x=DATE, y=HEAD) + geom_point() + ggtitle(unique(.$NAME)))
test
test$plots[[1]]
test <- hm$xd %>% dplyr::group_by(NAME) %>% do(plots=ggplot(data=.) +
aes(x=DATE, y=HEAD) + geom_point() + ggtitle(unique(.$NAME)))
test$plots[[1]]
test <- hm$xd %>% dplyr::group_by(NAME,FILTER)
str(test)
test <- hm$xd %>% dplyr::group_by(NAME) %>% do(plots=ggplot(data=.) +
aes(x=DATE, y=HEAD) + geom_point() + ggtitle(unique(.$NAME)))
test$plots[[1]]
str(test$plots[[1]])
str(hm)
head(hm$xm)
test <- hm$xd %>% dplyr::group_by(X,Y) %>% do(plots=ggplot(data=.) +
aes(x=DATE, y=HEAD) + geom_point() + ggtitle(unique(.$NAME)))
test <- hm$xd %>% dplyr::group_by(NAME,FILTER) %>% do(plots=ggplot(data=.) +
aes(x=DATE, y=HEAD) + geom_point() + ggtitle(unique(.$NAME)))
head(hm$xd)
?gsub
gsub("[A-Z]$","",hm$xd$NAME)
gsub("([A-Z]$)|([a-z]$)","",hm$xd$NAME)
remove_trailing_letter(x) <- function(x) {
gsub("([A-Z]$)|([a-z]$)","",x)
}
remove_trailing_letter("13250900B002A")
remove_trailing_letter(x) <- function(x) {
gsub("([A-Z]$)|([a-z]$)","",x)
}
remove_trailing_letter(x) <- function(x) {
gsub("([A-Z]$)|([a-z]$)","",x)
}
remove_trailing_letter("13250900B002A")
remove_trailing_letter <- function(x) {
gsub("([A-Z]$)|([a-z]$)","",x)
}
remove_trailing_letter("13250900B002A")
load_all()
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm1 <- hm_read_export_csv( fname )
str(hm1)
load_all()
hm1 <- hm_read_export_csv( fname )
str(hm1)
use_data(hm1)
use_data(hm1, overwrite=TRUE)
fname <- system.file("extdata","Topsoil1.csv",package="menyanthes")
hm2 <- hm_read_export_csv2( fname )
str(hm2)
use_data(hm2, overwrite=TRUE)
library(devtools)
document()
use_package(ggplot2)
library(ggplot2)
use_package(ggplot2)
install.packages("ggplot")
library(devtools)
use_package(ggplot2)
?use_package
use_package("ggplot2")
?do
?aes
?geom_point
library(devtools)
library(menyanthes)
?menyanthes
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm1 <- hm_read_export_csv( fname )
?hm_plot
hm <- hm1
plots <- hm_plot(hm)
plots$plots[[2]]
hm$xm
hm$xd %>% dplyr::group_by(NAME, FILTER)
library(magrittr)
library(ggplot2)
hm$xd %>% dplyr::group_by(NAME, FILTER)
hm$xd %>% dplyr::group_by(NAME) %>% dplyr::do(
plots = ggplot2::ggplot(data = .) +
ggplot2::aes(x = DATE, y = HEAD) + ggplot2::geom_point() + ggplot2::ggtitle(unique(.$NAME))
)
plots <-
hm$xd %>% dplyr::group_by(NAME) %>% dplyr::do(
plots = ggplot2::ggplot(data = .) +
ggplot2::aes(x = DATE, y = HEAD) + ggplot2::geom_point() + ggplot2::ggtitle(unique(.$NAME))
)
plot(plots[[1]])
str(plots[1])
plot(plots[1])
plots[1]
plots[1]$NAME
str(plots)
plots <-
hm$xd %>% dplyr::group_by(NAME) %>% dplyr::do(
plots = ggplot2::ggplot(data = .) +
ggplot2::aes(x = DATE, y = HEAD) + ggplot2::geom_point() + ggplot2::ggtitle(unique(.$NAME))
)
str(plots)
plots$plots[[1]]
plots$NAME
plots$NAME[1]
?geom_point
plist <-
hm$xd %>% dplyr::group_by(NAME) %>% dplyr::do(
plots = ggplot2::ggplot(data = .) +
ggplot2::aes(x = DATE, y = HEAD) + ggplot2::geom_point(color=FILTER) + ggplot2::ggtitle(unique(.$NAME))
)
plist <-
hm$xd %>% dplyr::group_by(NAME) %>% dplyr::do(
plots = ggplot2::ggplot(data = .) +
ggplot2::aes(x = DATE, y = HEAD) + ggplot2::geom_point(color=.$FILTER) + ggplot2::ggtitle(unique(.$NAME))
)
plist$plots[[1]]
plist <-
hm$xd %>% dplyr::group_by(NAME) %>% dplyr::do(
plots = ggplot2::ggplot(data = .) +
ggplot2::aes(x = DATE, y = HEAD, color=FILTER) + ggplot2::geom_point() + ggplot2::ggtitle(unique(.$NAME))
)
plist$plots[[1]]
hm$xd$FILTER %<>% as.factor()
plist <-
hm$xd %>% dplyr::group_by(NAME) %>% dplyr::do(
plots = ggplot2::ggplot(data = .) +
ggplot2::aes(x = DATE, y = HEAD, color=FILTER) + ggplot2::geom_point() + ggplot2::ggtitle(unique(.$NAME))
)
plist$plots[[1]]
hm_plot <- function(hm) {
hm$xd$FILTER %<>% as.factor()
hm$xd %>% dplyr::group_by(NAME) %>% dplyr::do(
plots = ggplot2::ggplot(data = .) +
ggplot2::aes(x = DATE, y = HEAD, color = FILTER) + ggplot2::geom_point() + ggplot2::ggtitle(unique(.$NAME))
)
}
x <- hm_plot(hm)
x$plots[[1]]
str(x$NAME)
str(x)
x$NAME
x$NAME[1]
str(x$NAME)
str(x$plots)
length(x$plots)
str(x)
?str()
str(x$NAME)
?ggplot2::ggplot
document()
load_all()
?hm_plot()
load_all()
x <- hm_plot(hm)
x$NAME[1]
x$plots[[1]]
range(is.na(hm$xd$HEAD))
range(is.na(hm$xd$DATE))
x$plots[[2]]
x$plots[[3]]
load_all()
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm1 <- hm_read_export_csv( fname )
is.na(hm1$xd$HEAD)
range(is.na(hm1$xd$HEAD))
use_data(hm1,overwrite=TRUE)
load_all()
hm1 <- hm_read_export_csv( fname )
range(is.na(hm1$xd$HEAD))
str(hm1)
use_data(hm1,overwrite=TRUE)
fname <- system.file("extdata","Topsoil1.csv",package="menyanthes")
hm2 <- hm_read_export_csv2( fname )
str(hm2)
range(is.na(hm2$xd$HEAD))
use_data(hm2,overwrite=TRUE)
hm <- hm_read_export_csv( fname )
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm <- hm_read_export_csv( fname )
x <- hm_plot(hm)
x$NAME[1]
x$plots[[1]]
library(menyanthes)
load_all()
library(devtools)
load_all()
fname <- system.file("extdata","export_data_menyanthes.csv",package="menyanthes")
hm1 <- hm_read_export_csv( fname )
fname <- system.file("extdata","Topsoil1.csv",package="menyanthes")
hm2 <- hm_read_export_csv2( fname )
str(hm1)
test <- rbind(hm1$xm,hm2$xm)
str(test)
load_all()
library(devtools)
load_all()
fname <- system.file("extdata","Topsoil1.csv",package="menyanthes")
hm2 <- hm_read_export_csv2( fname )
str(hm2)
hm_calc_gxg(hm2)
?quantile
hm2
hm <- hm2
xm <- hm2$xd
xd <- hm2$xd
x <- xd %>% dplyr::group_by(NAME) %>% dplyr::n()
x <- xd %>% dplyr::group_by(NAME)
x
x <- xd %>% dplyr::group_by(NAME) %>% dplyr::summarise()
x
names(x)
x <- xd %>% dplyr::group_by(NAME) %>% dplyr::summarise(n=n())
x <- xd %>% dplyr::group_by(NAME) %>% dplyr::summarise(n=dplyr::n())
x
x <- xd %>% dplyr::group_by(NAME,FILTER) %>% dplyr::summarise(n=dplyr::n())
str(x)
x$n
x <- xd %>% dplyr::group_by(NAME,FILTER) %>% dplyr::summarise(n=dplyr::n(),mean=dplyr::mean())
x <- xd %>% dplyr::group_by(NAME,FILTER) %>% dplyr::summarise(n=dplyr::n(),mean=mean())
x <- xd %>% dplyr::group_by(NAME,FILTER) %>% dplyr::summarise(n=dplyr::n())
n <- xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(n=dplyr::n())
n <- xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(n=dplyr::n())
n
nf <- xd %>% dplyr::group_by(NAME,FILTER) %>% dplyr::summarise(nf=dplyr::n())
n <- xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(n=dplyr::n())
head(nf)
head(n)
x <- dplyr::left_join(nf,n)
head(x)
xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(n=dplyr::count())
xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(n=dplyr::count(FILTER))
xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nfilter=dplyr::unique(FILTER))
xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nfilter=dplyr::n_distinct(FILTER))
n <- xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean=dplyr::n()/dplyr::n_distinct(FILTER))
head(n)
x <- dplyr::left_join(nf,n)
x
x$ratio <- x$nf/x$nmean
x
range(x$ratio)
n_obs_ratio(pb_name, xd) <- function (hm) {
nf <-
hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(nf = dplyr::n())
n <-
hm$xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean = dplyr::n() /
dplyr::n_distinct(FILTER))
x <- dplyr::left_join(nf, n)
x$ratio <- x$nf / x$nmean
x$nf <- NULL
x$nmean <- NULL
return( x$nf / x$nmean )
}
n_obs_ratio(pb_name, xd) <- function (hm) {
nf <-
hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(nf = dplyr::n())
n <-
hm$xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean = dplyr::n() /
dplyr::n_distinct(FILTER))
x <- dplyr::left_join(nf, n)
x$ratio <- x$nf / x$nmean
x$nf <- NULL
x$nmean <- NULL
return( x$nf / x$nmean )
}
n_obs_ratio(pb_name, xd) <- function (hm) {
nf <-
hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(nf = dplyr::n())
n <-
hm$xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean = dplyr::n() /
dplyr::n_distinct(FILTER))
x <- dplyr::left_join(nf, n)
x$ratio <- x$nf / x$nmean
x$nf <- NULL
x$nmean <- NULL
return( x$nf / x$nmean )
}
n_obs_ratio(pb_name, xd) <- function (hm) {
nf <-
hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(nf = dplyr::n())
n <-
hm$xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean = dplyr::n() /
dplyr::n_distinct(FILTER))
x <- dplyr::left_join(nf, n)
x$ratio <- x$nf / x$nmean
x$nf <- NULL
x$nmean <- NULL
return( x$nf / x$nmean )
}
nr_obs_ratio <- function (hm) {
nf <-
hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(nf = dplyr::n())
n <-
hm$xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean = dplyr::n() /
dplyr::n_distinct(FILTER))
x <- dplyr::left_join(nf, n)
x$ratio <- x$nf / x$nmean
x$nf <- NULL
x$nmean <- NULL
return( x$nf / x$nmean )
}
nr_obs_ratio(hm2)
hm2
hm <- hm2
nf <-
hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(nf = dplyr::n())
nf
n <-
hm$xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean = dplyr::n() /
dplyr::n_distinct(FILTER))
n
x <- dplyr::left_join(nf, n)
x
x$ratio <- x$nf / x$nmean
x
x$nf <- NULL
x$nmean <- NULL
nr_obs_ratio <- function (hm) {
nf <-
hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(nf = dplyr::n())
n <-
hm$xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean = dplyr::n() /
dplyr::n_distinct(FILTER))
x <- dplyr::left_join(nf, n)
x$ratio <- x$nf / x$nmean
x$nf <- NULL
x$nmean <- NULL
return( x )
}
nr_obs_ratio(hm2)
nr_obs_ratio <- function (hm) {
nf <-
hm$xd %>% dplyr::group_by(NAME, FILTER) %>% dplyr::summarise(nf = dplyr::n())
n <-
hm$xd %>%  dplyr::group_by(NAME) %>% dplyr::summarise(nmean = dplyr::n() /
dplyr::n_distinct(FILTER))
x <- dplyr::left_join(nf, n)
x$RATIO <- x$nf / x$nmean
x$nf <- NULL
x$nmean <- NULL
return( x )
}
document()
library(menyanthes)
library(menyanthes)
